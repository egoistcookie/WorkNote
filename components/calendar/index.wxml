<!--components/calendar/index.wxml-->
<view class="calendar-container">
  <view class="calendar-header">
    <view class="date-selector" bindtap="onDatePickerTap">
      <text class="date-text">{{dateText}}</text>
      <van-icon name="calendar-o" size="16px" />
    </view>
  </view>
  
  <view class="calendar-week">
    <view 
      wx:for="{{weekDates}}" 
      wx:key="dateStr"
      class="calendar-day {{item.isSelected ? 'selected' : ''}} {{item.isToday ? 'today' : ''}}"
      data-date="{{item.dateStr}}"
      bindtap="onDateSelect"
    >
      <text class="weekday">{{item.weekday}}</text>
      <text class="day-number">{{item.dayNumber}}</text>
      <view wx:if="{{item.isSelected}}" class="selected-indicator">1</view>
    </view>
  </view>
</view>

<!-- 日期选择器弹窗 -->
<van-popup
  show="{{showDatePicker}}"
  position="bottom"
  bind:close="onDatePickerClose"
  custom-style="border-radius: 20rpx 20rpx 0 0;"
>
  <van-datetime-picker
    id="datePicker"
    type="date"
    value="{{currentDate}}"
    min-date="{{minDate}}"
    max-date="{{maxDate}}"
    show-toolbar
    title="选择日期"
    bind:confirm="onDatePickerConfirmFromComponent"
    bind:cancel="onDatePickerClose"
  />
</van-popup>

