<!--components/task-item/index.wxml-->
<view class="task-item" bindtap="onTaskTap">
  <view class="task-time">
    <text class="start-time">{{task.startTime}}</text>
    <text wx:if="{{task.endTime}}" class="end-time">{{task.endTime}}</text>
  </view>
  <view class="task-content">
    <view class="task-card {{task.status === 'in_progress' ? 'task-running' : ''}} {{selected ? 'task-selected' : ''}}">
      <view class="task-header">
        <van-icon name="bars" size="16px" />
        <view class="task-title-wrapper">
          <text class="task-title">{{task.title}}</text>
          <text wx:if="{{task.description}}" class="task-description"> {{task.description}}</text>
        </view>
        <!-- 详情按钮（仅未完成任务显示） -->
        <view 
          wx:if="{{task.status !== 'completed'}}" 
          class="detail-button"
          catchtap="onDetailTap"
        >
          <van-icon name="setting-o" size="18px" color="#969799" />
        </view>
        <!-- 进行中状态指示 -->
        <view wx:if="{{task.status === 'in_progress'}}" class="running-indicator">
          <view class="running-dot"></view>
        </view>
      </view>
      <!-- 计时显示 -->
      <view wx:if="{{task.duration}}" class="task-duration">
        <van-icon wx:if="{{task.status === 'in_progress'}}" name="clock-o" size="14px" />
        <text class="duration-text">{{task.duration}}</text>
      </view>
      <view class="task-footer">
        <van-tag 
          type="primary" 
          custom-color="{{categoryColor}}"
          size="medium"
        >
          {{task.category}}
        </van-tag>
      </view>
    </view>
  </view>
</view>

