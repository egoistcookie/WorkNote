<!--components/task-modal/index.wxml-->
<van-popup
  show="{{show}}"
  position="bottom"
  custom-style="height: 50%; border-radius: 20rpx 20rpx 0 0;"
  bind:close="onClose"
  closeable
  close-icon-position="top-right"
>
  <view class="task-modal">
    <!-- 任务标题 -->
    <view class="modal-header">
      <view class="task-title-wrapper">
        <view class="task-title-badge">
          <view class="title-dot"></view>
          <input
            class="task-title-input"
            value="{{taskTitle}}"
            placeholder="{{selectedCategory}}"
            bindinput="onTitleInput"
            maxlength="50"
          />
        </view>
      </view>
    </view>

    <!-- 开始计时按钮 -->
    <view class="start-timer-section">
      <van-button
        type="primary"
        size="large"
        custom-color="#07c160"
        bindtap="onStartTimer"
        class="start-timer-btn"
      >
        <van-icon name="play" size="18px" />
        <text class="button-text">开始计时</text>
      </van-button>
    </view>

    <!-- 分类选择 -->
    <view class="category-section">
      <view class="section-title">选择分类</view>
      <view class="category-grid">
        <view
          wx:for="{{categories}}"
          wx:key="label"
          class="category-item {{selectedCategory === item.label ? 'selected' : ''}}"
          style="background-color: {{selectedCategory === item.label ? item.color : '#f5f5f5'}}"
          data-category="{{item.label}}"
          bindtap="onCategorySelect"
        >
          {{item.label}}
        </view>
      </view>
    </view>

    <!-- 备注输入 -->
    <view class="note-section">
      <van-field
        value="{{taskNote}}"
        placeholder="≡ 添加备注..."
        border="{{false}}"
        bind:input="onNoteInput"
        custom-style="background-color: #f5f5f5; border-radius: 8rpx; padding: 20rpx;"
      />
    </view>

    <!-- 保存按钮 -->
    <view class="save-section">
      <van-button
        type="primary"
        size="large"
        bindtap="onSave"
        class="save-btn"
      >
        保存
      </van-button>
    </view>
  </view>
</van-popup>

