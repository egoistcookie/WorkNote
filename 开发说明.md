# 微信小程序 TypeScript 开发说明

## 问题：找不到 .js 文件

如果微信开发者工具报错"未找到对应的 .js 文件"，请按以下步骤解决：

### 方案一：手动编译 TypeScript（推荐）

**重要**：微信开发者工具**不支持直接编译 TypeScript**，需要先将 `.ts` 文件编译成 `.js` 文件。

1. **安装 TypeScript 编译器**
   ```bash
   npm install -g typescript
   ```
   或者使用项目本地安装：
   ```bash
   npm install --save-dev typescript
   ```

2. **编译所有 TypeScript 文件**
   在项目根目录运行：
   ```bash
   tsc
   ```
   这会在每个 `.ts` 文件旁边生成对应的 `.js` 文件
   - `pages/timeline/index.ts` → `pages/timeline/index.js`
   - `app.ts` → `app.js`
   - 等等

3. **在微信开发者工具中设置**
   - 打开项目后，点击右上角"详情"
   - 在"本地设置"中：
     - ✅ 确保"将 JS 编译成 ES5"已勾选（通常默认已勾选）
     - ✅ 可以勾选"启用代码自动热重载"方便开发
   - 保存后重新编译

4. **自动编译（开发时推荐）**
   使用 watch 模式，当 `.ts` 文件改变时自动编译：
   ```bash
   tsc --watch
   ```
   保持这个终端窗口打开，每次保存 `.ts` 文件时会自动生成 `.js` 文件

### 方案二：使用 npm 脚本自动编译

项目已配置好编译脚本，可以直接使用：

**编译一次：**
```bash
npm run build
```

**监听模式（推荐开发时使用）：**
```bash
npm run watch
```

这样每次修改 `.ts` 文件后会自动编译成 `.js` 文件。

## 注意事项

1. **文件结构**
   - TypeScript 文件：`pages/timeline/index.ts`
   - 编译后的 JavaScript 文件：`pages/timeline/index.js`
   - 两者应该在同一目录下

2. **Git 忽略**
   - 建议在 `.gitignore` 中添加 `*.js` 和 `*.js.map`
   - 只提交 `.ts` 源文件

3. **微信开发者工具设置**
   - 如果使用手动编译，确保工具不会覆盖你的 .js 文件
   - 可以在"本地设置"中关闭"自动编译"

## 快速开始

1. **首次运行**：
   ```bash
   # 安装依赖（如果需要）
   npm install
   
   # 编译 TypeScript
   npm run build
   ```

2. **开发时**：
   ```bash
   # 在一个终端运行监听模式
   npm run watch
   
   # 然后在微信开发者工具中打开项目
   ```

3. **微信开发者工具设置**：
   - 确保"将 JS 编译成 ES5"已勾选 ✅
   - 可以勾选"启用代码自动热重载" ✅

## 常见问题

**Q: 为什么需要手动编译？**
A: 微信开发者工具不支持直接编译 TypeScript，需要先将 `.ts` 编译成 `.js`。

**Q: 每次都要手动编译吗？**
A: 使用 `npm run watch` 可以自动监听文件变化并编译。

**Q: `.js` 文件需要提交到 Git 吗？**
A: 不需要，`.gitignore` 已配置忽略 `.js` 文件，只提交 `.ts` 源文件。

